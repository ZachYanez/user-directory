{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _regeneratorRuntime = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _objectWithoutProperties = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _defineProperty = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _asyncToGenerator = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _objectSpread = require(\"/Users/zacharyyanez/bootcamp/user-directory/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.type = type;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _click = require(\"./click\");\n\nvar _navigationKey = require(\"./keys/navigation-key\"); // TODO: wrap in asyncWrapper\n\n\nvar modifierCallbackMap = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, createModifierCallbackEntries({\n  name: 'shift',\n  key: 'Shift',\n  keyCode: 16,\n  modifierProperty: 'shiftKey'\n})), createModifierCallbackEntries({\n  name: 'ctrl',\n  key: 'Control',\n  keyCode: 17,\n  modifierProperty: 'ctrlKey'\n})), createModifierCallbackEntries({\n  name: 'alt',\n  key: 'Alt',\n  keyCode: 18,\n  modifierProperty: 'altKey'\n})), createModifierCallbackEntries({\n  name: 'meta',\n  key: 'Meta',\n  keyCode: 93,\n  modifierProperty: 'metaKey'\n})), {}, {\n  // capslock is inline because of the need to fire both keydown and keyup on use, while preserving the modifier state.\n  '{capslock}': function capslock(_ref) {\n    var currentElement = _ref.currentElement,\n        eventOverrides = _ref.eventOverrides;\n    var newEventOverrides = {\n      modifierCapsLock: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  },\n  '{/capslock}': function capslock(_ref2) {\n    var currentElement = _ref2.currentElement,\n        eventOverrides = _ref2.eventOverrides;\n    var newEventOverrides = {\n      modifierCapsLock: false\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n});\n\nvar specialCharCallbackMap = {\n  '{arrowleft}': (0, _navigationKey.navigationKey)('ArrowLeft'),\n  '{arrowright}': (0, _navigationKey.navigationKey)('ArrowRight'),\n  '{arrowdown}': handleArrowDown,\n  '{arrowup}': handleArrowUp,\n  '{enter}': handleEnter,\n  '{esc}': handleEsc,\n  '{del}': handleDel,\n  '{backspace}': handleBackspace,\n  '{selectall}': handleSelectall,\n  '{space}': handleSpace,\n  ' ': handleSpace\n};\n\nfunction wait(time) {\n  return new Promise(function (resolve) {\n    return setTimeout(function () {\n      return resolve();\n    }, time);\n  });\n} // this needs to be wrapped in the event/asyncWrapper for React's act and angular's change detection\n// depending on whether it will be async.\n\n\nfunction type(_x, _x2) {\n  return _type.apply(this, arguments);\n}\n\nfunction _type() {\n  _type = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(element, text) {\n    var _ref22,\n        _ref22$delay,\n        delay,\n        options,\n        result,\n        _args2 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref22 = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {}, _ref22$delay = _ref22.delay, delay = _ref22$delay === void 0 ? 0 : _ref22$delay, options = _objectWithoutProperties(_ref22, [\"delay\"]);\n\n            if (!(delay > 0)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 4;\n            return (0, _dom.getConfig)().asyncWrapper( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return typeImpl(element, text, _objectSpread({\n                        delay: delay\n                      }, options));\n\n                    case 2:\n                      result = _context.sent;\n\n                    case 3:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            })));\n\n          case 4:\n            _context2.next = 7;\n            break;\n\n          case 6:\n            result = typeImpl(element, text, _objectSpread({\n              delay: delay\n            }, options));\n\n          case 7:\n            return _context2.abrupt(\"return\", result);\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _type.apply(this, arguments);\n}\n\nfunction typeImpl(_x3, _x4, _x5) {\n  return _typeImpl.apply(this, arguments);\n}\n\nfunction _typeImpl() {\n  _typeImpl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(element, text, _ref3) {\n    var delay, _ref3$skipClick, skipClick, _ref3$skipAutoClose, skipAutoClose, initialSelectionStart, initialSelectionEnd, range, currentElement, value, _ref24, selectionStart, selectionEnd, eventCallbacks;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            delay = _ref3.delay, _ref3$skipClick = _ref3.skipClick, skipClick = _ref3$skipClick === void 0 ? false : _ref3$skipClick, _ref3$skipAutoClose = _ref3.skipAutoClose, skipAutoClose = _ref3$skipAutoClose === void 0 ? false : _ref3$skipAutoClose, initialSelectionStart = _ref3.initialSelectionStart, initialSelectionEnd = _ref3.initialSelectionEnd;\n\n            if (!element.disabled) {\n              _context4.next = 3;\n              break;\n            }\n\n            return _context4.abrupt(\"return\");\n\n          case 3:\n            if (!skipClick) (0, _click.click)(element);\n\n            if ((0, _utils.isContentEditable)(element) && document.getSelection().rangeCount === 0) {\n              range = document.createRange();\n              range.setStart(element, 0);\n              range.setEnd(element, 0);\n              document.getSelection().addRange(range);\n            } // The focused element could change between each event, so get the currently active element each time\n\n\n            currentElement = function currentElement() {\n              return (0, _utils.getActiveElement)(element.ownerDocument);\n            }; // by default, a new element has it's selection start and end at 0\n            // but most of the time when people call \"type\", they expect it to type\n            // at the end of the current input value. So, if the selection start\n            // and end are both the default of 0, then we'll go ahead and change\n            // them to the length of the current value.\n            // the only time it would make sense to pass the initialSelectionStart or\n            // initialSelectionEnd is if you have an input with a value and want to\n            // explicitely start typing with the cursor at 0. Not super common.\n\n\n            value = (0, _utils.getValue)(currentElement());\n            _ref24 = (0, _utils.getSelectionRange)(element), selectionStart = _ref24.selectionStart, selectionEnd = _ref24.selectionEnd;\n\n            if (value != null && selectionStart === 0 && selectionEnd === 0) {\n              (0, _utils.setSelectionRangeIfNecessary)(currentElement(), initialSelectionStart != null ? initialSelectionStart : value.length, initialSelectionEnd != null ? initialSelectionEnd : value.length);\n            }\n\n            eventCallbacks = function () {\n              var callbacks = [];\n              var remainingString = text;\n\n              while (remainingString) {\n                var _getNextCallback = getNextCallback(remainingString, skipAutoClose),\n                    callback = _getNextCallback.callback,\n                    newRemainingString = _getNextCallback.remainingString;\n\n                callbacks.push(callback);\n                remainingString = newRemainingString;\n              }\n\n              return callbacks;\n            }();\n\n            _context4.next = 12;\n            return function () {\n              var _ref25 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(callbacks) {\n                var eventOverrides, prevWasMinus, prevWasPeriod, prevValue, typedValue, _iterator, _step, callback, returnValue;\n\n                return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        eventOverrides = {};\n                        _iterator = _createForOfIteratorHelper(callbacks);\n                        _context3.prev = 2;\n\n                        _iterator.s();\n\n                      case 4:\n                        if ((_step = _iterator.n()).done) {\n                          _context3.next = 12;\n                          break;\n                        }\n\n                        callback = _step.value;\n\n                        if (!(delay > 0)) {\n                          _context3.next = 9;\n                          break;\n                        }\n\n                        _context3.next = 9;\n                        return wait(delay);\n\n                      case 9:\n                        if (!currentElement().disabled) {\n                          returnValue = callback({\n                            currentElement: currentElement,\n                            prevWasMinus: prevWasMinus,\n                            prevWasPeriod: prevWasPeriod,\n                            prevValue: prevValue,\n                            eventOverrides: eventOverrides,\n                            typedValue: typedValue\n                          });\n                          Object.assign(eventOverrides, returnValue == null ? void 0 : returnValue.eventOverrides);\n                          prevWasMinus = returnValue == null ? void 0 : returnValue.prevWasMinus;\n                          prevWasPeriod = returnValue == null ? void 0 : returnValue.prevWasPeriod;\n                          prevValue = returnValue == null ? void 0 : returnValue.prevValue;\n                          typedValue = returnValue == null ? void 0 : returnValue.typedValue;\n                        }\n\n                      case 10:\n                        _context3.next = 4;\n                        break;\n\n                      case 12:\n                        _context3.next = 17;\n                        break;\n\n                      case 14:\n                        _context3.prev = 14;\n                        _context3.t0 = _context3[\"catch\"](2);\n\n                        _iterator.e(_context3.t0);\n\n                      case 17:\n                        _context3.prev = 17;\n\n                        _iterator.f();\n\n                        return _context3.finish(17);\n\n                      case 20:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3, null, [[2, 14, 17, 20]]);\n              }));\n\n              return function (_x6) {\n                return _ref25.apply(this, arguments);\n              };\n            }()(eventCallbacks);\n\n          case 12:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _typeImpl.apply(this, arguments);\n}\n\nfunction getNextCallback(remainingString, skipAutoClose) {\n  var modifierCallback = getModifierCallback(remainingString, skipAutoClose);\n\n  if (modifierCallback) {\n    return modifierCallback;\n  }\n\n  var specialCharCallback = getSpecialCharCallback(remainingString);\n\n  if (specialCharCallback) {\n    return specialCharCallback;\n  }\n\n  return getTypeCallback(remainingString);\n}\n\nfunction getModifierCallback(remainingString, skipAutoClose) {\n  var modifierKey = Object.keys(modifierCallbackMap).find(function (key) {\n    return remainingString.startsWith(key);\n  });\n\n  if (!modifierKey) {\n    return null;\n  }\n\n  var callback = modifierCallbackMap[modifierKey]; // if this modifier has an associated \"close\" callback and the developer\n  // doesn't close it themselves, then we close it for them automatically\n  // Effectively if they send in: '{alt}a' then we type: '{alt}a{/alt}'\n\n  if (!skipAutoClose && callback.closeName && !remainingString.includes(callback.closeName)) {\n    remainingString += callback.closeName;\n  }\n\n  remainingString = remainingString.slice(modifierKey.length);\n  return {\n    callback: callback,\n    remainingString: remainingString\n  };\n}\n\nfunction getSpecialCharCallback(remainingString) {\n  var specialChar = Object.keys(specialCharCallbackMap).find(function (key) {\n    return remainingString.startsWith(key);\n  });\n\n  if (!specialChar) {\n    return null;\n  }\n\n  return {\n    callback: specialCharCallbackMap[specialChar],\n    remainingString: remainingString.slice(specialChar.length)\n  };\n}\n\nfunction getTypeCallback(remainingString) {\n  var character = remainingString[0];\n  return {\n    callback: function callback(context) {\n      return typeCharacter(character, context);\n    },\n    remainingString: remainingString.slice(1)\n  };\n}\n\nfunction setSelectionRange(_ref4) {\n  var currentElement = _ref4.currentElement,\n      newValue = _ref4.newValue,\n      newSelectionStart = _ref4.newSelectionStart;\n  // if we *can* change the selection start, then we will if the new value\n  // is the same as the current value (so it wasn't programatically changed\n  // when the fireEvent.input was triggered).\n  // The reason we have to do this at all is because it actually *is*\n  // programmatically changed by fireEvent.input, so we have to simulate the\n  // browser's default behavior\n  var value = (0, _utils.getValue)(currentElement());\n\n  if (value === newValue) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), newSelectionStart, newSelectionStart);\n  } else {\n    // If the currentValue is different than the expected newValue and we *can*\n    // change the selection range, than we should set it to the length of the\n    // currentValue to ensure that the browser behavior is mimicked.\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), value.length, value.length);\n  }\n}\n\nfunction fireInputEventIfNeeded(_ref5) {\n  var currentElement = _ref5.currentElement,\n      newValue = _ref5.newValue,\n      newSelectionStart = _ref5.newSelectionStart,\n      eventOverrides = _ref5.eventOverrides;\n  var prevValue = (0, _utils.getValue)(currentElement());\n\n  if (!currentElement().readOnly && !(0, _utils.isClickable)(currentElement()) && newValue !== prevValue) {\n    if ((0, _utils.isContentEditable)(currentElement())) {\n      _dom.fireEvent.input(currentElement(), _objectSpread({\n        target: {\n          textContent: newValue\n        }\n      }, eventOverrides));\n    } else {\n      _dom.fireEvent.input(currentElement(), _objectSpread({\n        target: {\n          value: newValue\n        }\n      }, eventOverrides));\n    }\n\n    setSelectionRange({\n      currentElement: currentElement,\n      newValue: newValue,\n      newSelectionStart: newSelectionStart\n    });\n  }\n\n  return {\n    prevValue: prevValue\n  };\n}\n\nfunction typeCharacter(char, _ref6) {\n  var currentElement = _ref6.currentElement,\n      _ref6$prevWasMinus = _ref6.prevWasMinus,\n      prevWasMinus = _ref6$prevWasMinus === void 0 ? false : _ref6$prevWasMinus,\n      _ref6$prevWasPeriod = _ref6.prevWasPeriod,\n      prevWasPeriod = _ref6$prevWasPeriod === void 0 ? false : _ref6$prevWasPeriod,\n      _ref6$prevValue = _ref6.prevValue,\n      prevValue = _ref6$prevValue === void 0 ? '' : _ref6$prevValue,\n      _ref6$typedValue = _ref6.typedValue,\n      typedValue = _ref6$typedValue === void 0 ? '' : _ref6$typedValue,\n      eventOverrides = _ref6.eventOverrides;\n  var key = char; // TODO: check if this also valid for characters with diacritic markers e.g. úé etc\n\n  var keyCode = char.charCodeAt(0);\n  var nextPrevWasMinus, nextPrevWasPeriod;\n  var textToBeTyped = typedValue + char;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    var keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n\n    if ((0, _utils.getValue)(currentElement()) != null && keyPressDefaultNotPrevented) {\n      var newEntry = char;\n\n      if (prevWasMinus) {\n        newEntry = \"-\".concat(char);\n      } else if (prevWasPeriod) {\n        newEntry = \"\".concat(prevValue, \".\").concat(char);\n      }\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        newEntry = textToBeTyped;\n      }\n\n      var timeNewEntry = (0, _utils.buildTimeValue)(textToBeTyped);\n\n      if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry)) {\n        newEntry = timeNewEntry;\n      }\n\n      var inputEvent = fireInputEventIfNeeded(_objectSpread(_objectSpread({}, (0, _utils.calculateNewValue)(newEntry, currentElement())), {}, {\n        eventOverrides: _objectSpread({\n          data: key,\n          inputType: 'insertText'\n        }, eventOverrides),\n        currentElement: currentElement\n      }));\n      prevValue = inputEvent.prevValue;\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        _dom.fireEvent.change(currentElement(), {\n          target: {\n            value: textToBeTyped\n          }\n        });\n      }\n\n      fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry); // typing \"-\" into a number input will not actually update the value\n      // so for the next character we type, the value should be set to\n      // `-${newEntry}`\n      // we also preserve the prevWasMinus when the value is unchanged due\n      // to typing an invalid character (typing \"-a3\" results in \"-3\")\n      // same applies for the decimal character.\n\n      if (currentElement().type === 'number') {\n        var newValue = (0, _utils.getValue)(currentElement());\n\n        if (newValue === prevValue && newEntry !== '-') {\n          nextPrevWasMinus = prevWasMinus;\n        } else {\n          nextPrevWasMinus = newEntry === '-';\n        }\n\n        if (newValue === prevValue && newEntry !== '.') {\n          nextPrevWasPeriod = prevWasPeriod;\n        } else {\n          nextPrevWasPeriod = newEntry === '.';\n        }\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  return {\n    prevWasMinus: nextPrevWasMinus,\n    prevWasPeriod: nextPrevWasPeriod,\n    prevValue: prevValue,\n    typedValue: textToBeTyped\n  };\n}\n\nfunction fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry) {\n  if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry) && prevValue !== timeNewEntry) {\n    _dom.fireEvent.change(currentElement(), {\n      target: {\n        value: timeNewEntry\n      }\n    });\n  }\n} // yes, calculateNewBackspaceValue and calculateNewValue look extremely similar\n// and you may be tempted to create a shared abstraction.\n// If you, brave soul, decide to so endevor, please increment this count\n// when you inevitably fail: 1\n\n\nfunction calculateNewBackspaceValue(element) {\n  var _ref7 = (0, _utils.getSelectionRange)(element),\n      selectionStart = _ref7.selectionStart,\n      selectionEnd = _ref7.selectionEnd;\n\n  var value = (0, _utils.getValue)(element);\n  var newValue, newSelectionStart;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value.slice(0, value.length - 1);\n    newSelectionStart = selectionStart - 1;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value;\n      newSelectionStart = selectionStart;\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value.slice(0, value.length - 1);\n      newSelectionStart = selectionStart - 1;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart - 1) + value.slice(selectionEnd);\n      newSelectionStart = selectionStart - 1;\n    }\n  } else {\n    // we have something selected\n    var firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n    newSelectionStart = firstPart.length;\n  }\n\n  return {\n    newValue: newValue,\n    newSelectionStart: newSelectionStart\n  };\n}\n\nfunction calculateNewDeleteValue(element) {\n  var _ref8 = (0, _utils.getSelectionRange)(element),\n      selectionStart = _ref8.selectionStart,\n      selectionEnd = _ref8.selectionEnd;\n\n  var value = (0, _utils.getValue)(element);\n  var newValue;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value.slice(1);\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart) + value.slice(selectionEnd + 1);\n    }\n  } else {\n    // we have something selected\n    var firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n  }\n\n  return {\n    newValue: newValue,\n    newSelectionStart: selectionStart\n  };\n}\n\nfunction createModifierCallbackEntries(_ref9) {\n  var _ref12;\n\n  var name = _ref9.name,\n      key = _ref9.key,\n      keyCode = _ref9.keyCode,\n      modifierProperty = _ref9.modifierProperty;\n  var closeName = \"{/\".concat(name, \"}\");\n\n  function open(_ref10) {\n    var currentElement = _ref10.currentElement,\n        eventOverrides = _ref10.eventOverrides;\n\n    var newEventOverrides = _defineProperty({}, modifierProperty, true);\n\n    _dom.fireEvent.keyDown(currentElement(), _objectSpread(_objectSpread({\n      key: key,\n      keyCode: keyCode,\n      which: keyCode\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  open.closeName = closeName;\n  return _ref12 = {}, _defineProperty(_ref12, \"{\".concat(name, \"}\"), open), _defineProperty(_ref12, closeName, function (_ref11) {\n    var currentElement = _ref11.currentElement,\n        eventOverrides = _ref11.eventOverrides;\n\n    var newEventOverrides = _defineProperty({}, modifierProperty, false);\n\n    _dom.fireEvent.keyUp(currentElement(), _objectSpread(_objectSpread({\n      key: key,\n      keyCode: keyCode,\n      which: keyCode\n    }, eventOverrides), newEventOverrides));\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }), _ref12;\n}\n\nfunction handleEnter(_ref13) {\n  var currentElement = _ref13.currentElement,\n      eventOverrides = _ref13.eventOverrides;\n  var key = 'Enter';\n  var keyCode = 13;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    var keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n\n    if (keyPressDefaultNotPrevented) {\n      if ((0, _utils.isClickable)(currentElement())) {\n        _dom.fireEvent.click(currentElement(), _objectSpread({}, eventOverrides));\n      }\n\n      if (currentElement().tagName === 'TEXTAREA') {\n        var _ref14 = (0, _utils.calculateNewValue)('\\n', currentElement()),\n            newValue = _ref14.newValue,\n            newSelectionStart = _ref14.newSelectionStart;\n\n        _dom.fireEvent.input(currentElement(), _objectSpread({\n          target: {\n            value: newValue\n          },\n          inputType: 'insertLineBreak'\n        }, eventOverrides));\n\n        setSelectionRange({\n          currentElement: currentElement,\n          newValue: newValue,\n          newSelectionStart: newSelectionStart\n        });\n      }\n\n      if (currentElement().tagName === 'INPUT' && currentElement().form && (currentElement().form.querySelectorAll('input').length === 1 || currentElement().form.querySelector('input[type=\"submit\"]') || currentElement().form.querySelector('button[type=\"submit\"]'))) {\n        _dom.fireEvent.submit(currentElement().form);\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleEsc(_ref15) {\n  var currentElement = _ref15.currentElement,\n      eventOverrides = _ref15.eventOverrides;\n  var key = 'Escape';\n  var keyCode = 27;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides)); // NOTE: Browsers do not fire a keypress on meta key presses\n\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleDel(_ref16) {\n  var currentElement = _ref16.currentElement,\n      eventOverrides = _ref16.eventOverrides;\n  var key = 'Delete';\n  var keyCode = 46;\n\n  var keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded(_objectSpread(_objectSpread({}, calculateNewDeleteValue(currentElement())), {}, {\n      eventOverrides: _objectSpread({\n        inputType: 'deleteContentForward'\n      }, eventOverrides),\n      currentElement: currentElement\n    }));\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleBackspace(_ref17) {\n  var currentElement = _ref17.currentElement,\n      eventOverrides = _ref17.eventOverrides;\n  var key = 'Backspace';\n  var keyCode = 8;\n\n  var keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded(_objectSpread(_objectSpread({}, calculateNewBackspaceValue(currentElement())), {}, {\n      eventOverrides: _objectSpread({\n        inputType: 'deleteContentBackward'\n      }, eventOverrides),\n      currentElement: currentElement\n    }));\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleSelectall(_ref18) {\n  var currentElement = _ref18.currentElement;\n  currentElement().setSelectionRange(0, (0, _utils.getValue)(currentElement()).length);\n}\n\nfunction handleSpace(context) {\n  if ((0, _utils.isClickable)(context.currentElement())) {\n    handleSpaceOnClickable(context);\n    return;\n  }\n\n  typeCharacter(' ', context);\n}\n\nfunction handleSpaceOnClickable(_ref19) {\n  var currentElement = _ref19.currentElement,\n      eventOverrides = _ref19.eventOverrides;\n  var key = ' ';\n  var keyCode = 32;\n\n  var keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented) {\n    _dom.fireEvent.keyPress(currentElement(), _objectSpread({\n      key: key,\n      keyCode: keyCode,\n      charCode: keyCode\n    }, eventOverrides));\n  }\n\n  var keyUpDefaultNotPrevented = _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  if (keyDownDefaultNotPrevented && keyUpDefaultNotPrevented) {\n    _dom.fireEvent.click(currentElement(), _objectSpread({}, eventOverrides));\n  }\n}\n\nfunction handleArrowDown(_ref20) {\n  var currentElement = _ref20.currentElement,\n      eventOverrides = _ref20.eventOverrides;\n  var key = 'ArrowDown';\n  var keyCode = 40;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}\n\nfunction handleArrowUp(_ref21) {\n  var currentElement = _ref21.currentElement,\n      eventOverrides = _ref21.eventOverrides;\n  var key = 'ArrowUp';\n  var keyCode = 38;\n\n  _dom.fireEvent.keyDown(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n\n  _dom.fireEvent.keyUp(currentElement(), _objectSpread({\n    key: key,\n    keyCode: keyCode,\n    which: keyCode\n  }, eventOverrides));\n}","map":{"version":3,"sources":["/Users/zacharyyanez/bootcamp/user-directory/node_modules/@testing-library/user-event/dist/type.js"],"names":["Object","defineProperty","exports","value","type","_dom","require","_utils","_click","_navigationKey","modifierCallbackMap","createModifierCallbackEntries","name","key","keyCode","modifierProperty","currentElement","eventOverrides","newEventOverrides","modifierCapsLock","fireEvent","keyDown","which","keyUp","specialCharCallbackMap","navigationKey","handleArrowDown","handleArrowUp","handleEnter","handleEsc","handleDel","handleBackspace","handleSelectall","handleSpace","wait","time","Promise","resolve","setTimeout","element","text","delay","options","getConfig","asyncWrapper","typeImpl","result","skipClick","skipAutoClose","initialSelectionStart","initialSelectionEnd","disabled","click","isContentEditable","document","getSelection","rangeCount","range","createRange","setStart","setEnd","addRange","getActiveElement","ownerDocument","getValue","getSelectionRange","selectionStart","selectionEnd","setSelectionRangeIfNecessary","length","eventCallbacks","callbacks","remainingString","getNextCallback","callback","newRemainingString","push","returnValue","prevWasMinus","prevWasPeriod","prevValue","typedValue","assign","modifierCallback","getModifierCallback","specialCharCallback","getSpecialCharCallback","getTypeCallback","modifierKey","keys","find","startsWith","closeName","includes","slice","specialChar","character","context","typeCharacter","setSelectionRange","newValue","newSelectionStart","fireInputEventIfNeeded","readOnly","isClickable","input","target","textContent","char","charCodeAt","nextPrevWasMinus","nextPrevWasPeriod","textToBeTyped","keyDownDefaultNotPrevented","keyPressDefaultNotPrevented","keyPress","charCode","newEntry","isValidDateValue","timeNewEntry","buildTimeValue","isValidInputTimeValue","inputEvent","calculateNewValue","data","inputType","change","fireChangeForInputTimeIfValid","calculateNewBackspaceValue","firstPart","calculateNewDeleteValue","open","tagName","form","querySelectorAll","querySelector","submit","handleSpaceOnClickable","keyUpDefaultNotPrevented"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.type = type;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _click = require(\"./click\");\n\nvar _navigationKey = require(\"./keys/navigation-key\");\n\n// TODO: wrap in asyncWrapper\nconst modifierCallbackMap = { ...createModifierCallbackEntries({\n    name: 'shift',\n    key: 'Shift',\n    keyCode: 16,\n    modifierProperty: 'shiftKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'ctrl',\n    key: 'Control',\n    keyCode: 17,\n    modifierProperty: 'ctrlKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'alt',\n    key: 'Alt',\n    keyCode: 18,\n    modifierProperty: 'altKey'\n  }),\n  ...createModifierCallbackEntries({\n    name: 'meta',\n    key: 'Meta',\n    keyCode: 93,\n    modifierProperty: 'metaKey'\n  }),\n  // capslock is inline because of the need to fire both keydown and keyup on use, while preserving the modifier state.\n  '{capslock}': function ({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      modifierCapsLock: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    _dom.fireEvent.keyUp(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  },\n  '{/capslock}': function ({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      modifierCapsLock: false\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    _dom.fireEvent.keyUp(currentElement(), {\n      key: 'CapsLock',\n      keyCode: 20,\n      which: 20,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n};\nconst specialCharCallbackMap = {\n  '{arrowleft}': (0, _navigationKey.navigationKey)('ArrowLeft'),\n  '{arrowright}': (0, _navigationKey.navigationKey)('ArrowRight'),\n  '{arrowdown}': handleArrowDown,\n  '{arrowup}': handleArrowUp,\n  '{enter}': handleEnter,\n  '{esc}': handleEsc,\n  '{del}': handleDel,\n  '{backspace}': handleBackspace,\n  '{selectall}': handleSelectall,\n  '{space}': handleSpace,\n  ' ': handleSpace\n};\n\nfunction wait(time) {\n  return new Promise(resolve => setTimeout(() => resolve(), time));\n} // this needs to be wrapped in the event/asyncWrapper for React's act and angular's change detection\n// depending on whether it will be async.\n\n\nasync function type(element, text, {\n  delay = 0,\n  ...options\n} = {}) {\n  // we do not want to wrap in the asyncWrapper if we're not\n  // going to actually be doing anything async, so we only wrap\n  // if the delay is greater than 0\n  let result;\n\n  if (delay > 0) {\n    await (0, _dom.getConfig)().asyncWrapper(async () => {\n      result = await typeImpl(element, text, {\n        delay,\n        ...options\n      });\n    });\n  } else {\n    result = typeImpl(element, text, {\n      delay,\n      ...options\n    });\n  }\n\n  return result;\n}\n\nasync function typeImpl(element, text, {\n  delay,\n  skipClick = false,\n  skipAutoClose = false,\n  initialSelectionStart,\n  initialSelectionEnd\n}) {\n  if (element.disabled) return;\n  if (!skipClick) (0, _click.click)(element);\n\n  if ((0, _utils.isContentEditable)(element) && document.getSelection().rangeCount === 0) {\n    const range = document.createRange();\n    range.setStart(element, 0);\n    range.setEnd(element, 0);\n    document.getSelection().addRange(range);\n  } // The focused element could change between each event, so get the currently active element each time\n\n\n  const currentElement = () => (0, _utils.getActiveElement)(element.ownerDocument); // by default, a new element has it's selection start and end at 0\n  // but most of the time when people call \"type\", they expect it to type\n  // at the end of the current input value. So, if the selection start\n  // and end are both the default of 0, then we'll go ahead and change\n  // them to the length of the current value.\n  // the only time it would make sense to pass the initialSelectionStart or\n  // initialSelectionEnd is if you have an input with a value and want to\n  // explicitely start typing with the cursor at 0. Not super common.\n\n\n  const value = (0, _utils.getValue)(currentElement());\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n\n  if (value != null && selectionStart === 0 && selectionEnd === 0) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), initialSelectionStart != null ? initialSelectionStart : value.length, initialSelectionEnd != null ? initialSelectionEnd : value.length);\n  }\n\n  const eventCallbacks = function () {\n    const callbacks = [];\n    let remainingString = text;\n\n    while (remainingString) {\n      const {\n        callback,\n        remainingString: newRemainingString\n      } = getNextCallback(remainingString, skipAutoClose);\n      callbacks.push(callback);\n      remainingString = newRemainingString;\n    }\n\n    return callbacks;\n  }();\n\n  await async function (callbacks) {\n    const eventOverrides = {};\n    let prevWasMinus, prevWasPeriod, prevValue, typedValue;\n\n    for (const callback of callbacks) {\n      if (delay > 0) await wait(delay);\n\n      if (!currentElement().disabled) {\n        const returnValue = callback({\n          currentElement,\n          prevWasMinus,\n          prevWasPeriod,\n          prevValue,\n          eventOverrides,\n          typedValue\n        });\n        Object.assign(eventOverrides, returnValue == null ? void 0 : returnValue.eventOverrides);\n        prevWasMinus = returnValue == null ? void 0 : returnValue.prevWasMinus;\n        prevWasPeriod = returnValue == null ? void 0 : returnValue.prevWasPeriod;\n        prevValue = returnValue == null ? void 0 : returnValue.prevValue;\n        typedValue = returnValue == null ? void 0 : returnValue.typedValue;\n      }\n    }\n  }(eventCallbacks);\n}\n\nfunction getNextCallback(remainingString, skipAutoClose) {\n  const modifierCallback = getModifierCallback(remainingString, skipAutoClose);\n\n  if (modifierCallback) {\n    return modifierCallback;\n  }\n\n  const specialCharCallback = getSpecialCharCallback(remainingString);\n\n  if (specialCharCallback) {\n    return specialCharCallback;\n  }\n\n  return getTypeCallback(remainingString);\n}\n\nfunction getModifierCallback(remainingString, skipAutoClose) {\n  const modifierKey = Object.keys(modifierCallbackMap).find(key => remainingString.startsWith(key));\n\n  if (!modifierKey) {\n    return null;\n  }\n\n  const callback = modifierCallbackMap[modifierKey]; // if this modifier has an associated \"close\" callback and the developer\n  // doesn't close it themselves, then we close it for them automatically\n  // Effectively if they send in: '{alt}a' then we type: '{alt}a{/alt}'\n\n  if (!skipAutoClose && callback.closeName && !remainingString.includes(callback.closeName)) {\n    remainingString += callback.closeName;\n  }\n\n  remainingString = remainingString.slice(modifierKey.length);\n  return {\n    callback,\n    remainingString\n  };\n}\n\nfunction getSpecialCharCallback(remainingString) {\n  const specialChar = Object.keys(specialCharCallbackMap).find(key => remainingString.startsWith(key));\n\n  if (!specialChar) {\n    return null;\n  }\n\n  return {\n    callback: specialCharCallbackMap[specialChar],\n    remainingString: remainingString.slice(specialChar.length)\n  };\n}\n\nfunction getTypeCallback(remainingString) {\n  const character = remainingString[0];\n  return {\n    callback: context => typeCharacter(character, context),\n    remainingString: remainingString.slice(1)\n  };\n}\n\nfunction setSelectionRange({\n  currentElement,\n  newValue,\n  newSelectionStart\n}) {\n  // if we *can* change the selection start, then we will if the new value\n  // is the same as the current value (so it wasn't programatically changed\n  // when the fireEvent.input was triggered).\n  // The reason we have to do this at all is because it actually *is*\n  // programmatically changed by fireEvent.input, so we have to simulate the\n  // browser's default behavior\n  const value = (0, _utils.getValue)(currentElement());\n\n  if (value === newValue) {\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), newSelectionStart, newSelectionStart);\n  } else {\n    // If the currentValue is different than the expected newValue and we *can*\n    // change the selection range, than we should set it to the length of the\n    // currentValue to ensure that the browser behavior is mimicked.\n    (0, _utils.setSelectionRangeIfNecessary)(currentElement(), value.length, value.length);\n  }\n}\n\nfunction fireInputEventIfNeeded({\n  currentElement,\n  newValue,\n  newSelectionStart,\n  eventOverrides\n}) {\n  const prevValue = (0, _utils.getValue)(currentElement());\n\n  if (!currentElement().readOnly && !(0, _utils.isClickable)(currentElement()) && newValue !== prevValue) {\n    if ((0, _utils.isContentEditable)(currentElement())) {\n      _dom.fireEvent.input(currentElement(), {\n        target: {\n          textContent: newValue\n        },\n        ...eventOverrides\n      });\n    } else {\n      _dom.fireEvent.input(currentElement(), {\n        target: {\n          value: newValue\n        },\n        ...eventOverrides\n      });\n    }\n\n    setSelectionRange({\n      currentElement,\n      newValue,\n      newSelectionStart\n    });\n  }\n\n  return {\n    prevValue\n  };\n}\n\nfunction typeCharacter(char, {\n  currentElement,\n  prevWasMinus = false,\n  prevWasPeriod = false,\n  prevValue = '',\n  typedValue = '',\n  eventOverrides\n}) {\n  const key = char; // TODO: check if this also valid for characters with diacritic markers e.g. úé etc\n\n  const keyCode = char.charCodeAt(0);\n  let nextPrevWasMinus, nextPrevWasPeriod;\n  const textToBeTyped = typedValue + char;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    const keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n\n    if ((0, _utils.getValue)(currentElement()) != null && keyPressDefaultNotPrevented) {\n      let newEntry = char;\n\n      if (prevWasMinus) {\n        newEntry = `-${char}`;\n      } else if (prevWasPeriod) {\n        newEntry = `${prevValue}.${char}`;\n      }\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        newEntry = textToBeTyped;\n      }\n\n      const timeNewEntry = (0, _utils.buildTimeValue)(textToBeTyped);\n\n      if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry)) {\n        newEntry = timeNewEntry;\n      }\n\n      const inputEvent = fireInputEventIfNeeded({ ...(0, _utils.calculateNewValue)(newEntry, currentElement()),\n        eventOverrides: {\n          data: key,\n          inputType: 'insertText',\n          ...eventOverrides\n        },\n        currentElement\n      });\n      prevValue = inputEvent.prevValue;\n\n      if ((0, _utils.isValidDateValue)(currentElement(), textToBeTyped)) {\n        _dom.fireEvent.change(currentElement(), {\n          target: {\n            value: textToBeTyped\n          }\n        });\n      }\n\n      fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry); // typing \"-\" into a number input will not actually update the value\n      // so for the next character we type, the value should be set to\n      // `-${newEntry}`\n      // we also preserve the prevWasMinus when the value is unchanged due\n      // to typing an invalid character (typing \"-a3\" results in \"-3\")\n      // same applies for the decimal character.\n\n      if (currentElement().type === 'number') {\n        const newValue = (0, _utils.getValue)(currentElement());\n\n        if (newValue === prevValue && newEntry !== '-') {\n          nextPrevWasMinus = prevWasMinus;\n        } else {\n          nextPrevWasMinus = newEntry === '-';\n        }\n\n        if (newValue === prevValue && newEntry !== '.') {\n          nextPrevWasPeriod = prevWasPeriod;\n        } else {\n          nextPrevWasPeriod = newEntry === '.';\n        }\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  return {\n    prevWasMinus: nextPrevWasMinus,\n    prevWasPeriod: nextPrevWasPeriod,\n    prevValue,\n    typedValue: textToBeTyped\n  };\n}\n\nfunction fireChangeForInputTimeIfValid(currentElement, prevValue, timeNewEntry) {\n  if ((0, _utils.isValidInputTimeValue)(currentElement(), timeNewEntry) && prevValue !== timeNewEntry) {\n    _dom.fireEvent.change(currentElement(), {\n      target: {\n        value: timeNewEntry\n      }\n    });\n  }\n} // yes, calculateNewBackspaceValue and calculateNewValue look extremely similar\n// and you may be tempted to create a shared abstraction.\n// If you, brave soul, decide to so endevor, please increment this count\n// when you inevitably fail: 1\n\n\nfunction calculateNewBackspaceValue(element) {\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n  const value = (0, _utils.getValue)(element);\n  let newValue, newSelectionStart;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value.slice(0, value.length - 1);\n    newSelectionStart = selectionStart - 1;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value;\n      newSelectionStart = selectionStart;\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value.slice(0, value.length - 1);\n      newSelectionStart = selectionStart - 1;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart - 1) + value.slice(selectionEnd);\n      newSelectionStart = selectionStart - 1;\n    }\n  } else {\n    // we have something selected\n    const firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n    newSelectionStart = firstPart.length;\n  }\n\n  return {\n    newValue,\n    newSelectionStart\n  };\n}\n\nfunction calculateNewDeleteValue(element) {\n  const {\n    selectionStart,\n    selectionEnd\n  } = (0, _utils.getSelectionRange)(element);\n  const value = (0, _utils.getValue)(element);\n  let newValue;\n\n  if (selectionStart === null) {\n    // at the end of an input type that does not support selection ranges\n    // https://github.com/testing-library/user-event/issues/316#issuecomment-639744793\n    newValue = value;\n  } else if (selectionStart === selectionEnd) {\n    if (selectionStart === 0) {\n      // at the beginning of the input\n      newValue = value.slice(1);\n    } else if (selectionStart === value.length) {\n      // at the end of the input\n      newValue = value;\n    } else {\n      // in the middle of the input\n      newValue = value.slice(0, selectionStart) + value.slice(selectionEnd + 1);\n    }\n  } else {\n    // we have something selected\n    const firstPart = value.slice(0, selectionStart);\n    newValue = firstPart + value.slice(selectionEnd);\n  }\n\n  return {\n    newValue,\n    newSelectionStart: selectionStart\n  };\n}\n\nfunction createModifierCallbackEntries({\n  name,\n  key,\n  keyCode,\n  modifierProperty\n}) {\n  const closeName = `{/${name}}`;\n\n  function open({\n    currentElement,\n    eventOverrides\n  }) {\n    const newEventOverrides = {\n      [modifierProperty]: true\n    };\n\n    _dom.fireEvent.keyDown(currentElement(), {\n      key,\n      keyCode,\n      which: keyCode,\n      ...eventOverrides,\n      ...newEventOverrides\n    });\n\n    return {\n      eventOverrides: newEventOverrides\n    };\n  }\n\n  open.closeName = closeName;\n  return {\n    [`{${name}}`]: open,\n    [closeName]: function ({\n      currentElement,\n      eventOverrides\n    }) {\n      const newEventOverrides = {\n        [modifierProperty]: false\n      };\n\n      _dom.fireEvent.keyUp(currentElement(), {\n        key,\n        keyCode,\n        which: keyCode,\n        ...eventOverrides,\n        ...newEventOverrides\n      });\n\n      return {\n        eventOverrides: newEventOverrides\n      };\n    }\n  };\n}\n\nfunction handleEnter({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Enter';\n  const keyCode = 13;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    const keyPressDefaultNotPrevented = _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n\n    if (keyPressDefaultNotPrevented) {\n      if ((0, _utils.isClickable)(currentElement())) {\n        _dom.fireEvent.click(currentElement(), { ...eventOverrides\n        });\n      }\n\n      if (currentElement().tagName === 'TEXTAREA') {\n        const {\n          newValue,\n          newSelectionStart\n        } = (0, _utils.calculateNewValue)('\\n', currentElement());\n\n        _dom.fireEvent.input(currentElement(), {\n          target: {\n            value: newValue\n          },\n          inputType: 'insertLineBreak',\n          ...eventOverrides\n        });\n\n        setSelectionRange({\n          currentElement,\n          newValue,\n          newSelectionStart\n        });\n      }\n\n      if (currentElement().tagName === 'INPUT' && currentElement().form && (currentElement().form.querySelectorAll('input').length === 1 || currentElement().form.querySelector('input[type=\"submit\"]') || currentElement().form.querySelector('button[type=\"submit\"]'))) {\n        _dom.fireEvent.submit(currentElement().form);\n      }\n    }\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleEsc({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Escape';\n  const keyCode = 27;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  }); // NOTE: Browsers do not fire a keypress on meta key presses\n\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleDel({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Delete';\n  const keyCode = 46;\n\n  const keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded({ ...calculateNewDeleteValue(currentElement()),\n      eventOverrides: {\n        inputType: 'deleteContentForward',\n        ...eventOverrides\n      },\n      currentElement\n    });\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleBackspace({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'Backspace';\n  const keyCode = 8;\n\n  const keyPressDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyPressDefaultNotPrevented) {\n    fireInputEventIfNeeded({ ...calculateNewBackspaceValue(currentElement()),\n      eventOverrides: {\n        inputType: 'deleteContentBackward',\n        ...eventOverrides\n      },\n      currentElement\n    });\n  }\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleSelectall({\n  currentElement\n}) {\n  currentElement().setSelectionRange(0, (0, _utils.getValue)(currentElement()).length);\n}\n\nfunction handleSpace(context) {\n  if ((0, _utils.isClickable)(context.currentElement())) {\n    handleSpaceOnClickable(context);\n    return;\n  }\n\n  typeCharacter(' ', context);\n}\n\nfunction handleSpaceOnClickable({\n  currentElement,\n  eventOverrides\n}) {\n  const key = ' ';\n  const keyCode = 32;\n\n  const keyDownDefaultNotPrevented = _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented) {\n    _dom.fireEvent.keyPress(currentElement(), {\n      key,\n      keyCode,\n      charCode: keyCode,\n      ...eventOverrides\n    });\n  }\n\n  const keyUpDefaultNotPrevented = _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  if (keyDownDefaultNotPrevented && keyUpDefaultNotPrevented) {\n    _dom.fireEvent.click(currentElement(), { ...eventOverrides\n    });\n  }\n}\n\nfunction handleArrowDown({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'ArrowDown';\n  const keyCode = 40;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}\n\nfunction handleArrowUp({\n  currentElement,\n  eventOverrides\n}) {\n  const key = 'ArrowUp';\n  const keyCode = 38;\n\n  _dom.fireEvent.keyDown(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n\n  _dom.fireEvent.keyUp(currentElement(), {\n    key,\n    keyCode,\n    which: keyCode,\n    ...eventOverrides\n  });\n}"]},"metadata":{},"sourceType":"script"}